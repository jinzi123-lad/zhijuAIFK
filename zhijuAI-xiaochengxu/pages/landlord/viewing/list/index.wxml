<view class="page-container">
  <navbar title="é¢„çº¦ç®¡ç†" />

  <!-- Tabåˆ‡æ¢ -->
  <view class="tabs">
    <view class="tab {{currentTab === 'pending' ? 'active' : ''}}" bindtap="switchTab" data-tab="pending">å¾…å¤„ç†</view>
    <view class="tab {{currentTab === 'confirmed' ? 'active' : ''}}" bindtap="switchTab" data-tab="confirmed">å·²ç¡®è®¤</view>
    <view class="tab {{currentTab === 'completed' ? 'active' : ''}}" bindtap="switchTab" data-tab="completed">å·²å®Œæˆ</view>
    <view class="tab {{currentTab === 'cancelled' ? 'active' : ''}}" bindtap="switchTab" data-tab="cancelled">å·²å–æ¶ˆ</view>
  </view>

  <!-- é¢„çº¦åˆ—è¡¨ -->
  <view class="appointment-list">
    <view class="appointment-card" wx:for="{{appointments}}" wx:key="id" wx:if="{{item.status === currentTab}}">
      <view class="card-header">
        <text class="property-name">{{item.propertyTitle}}</text>
        <text class="status-tag status-{{item.status}}">
          {{item.status === 'pending' ? 'å¾…å¤„ç†' : item.status === 'confirmed' ? 'å·²ç¡®è®¤' : item.status === 'completed' ? 'å·²å®Œæˆ' : 'å·²å–æ¶ˆ'}}
        </text>
      </view>
      
      <view class="card-body" bindtap="goToDetail" data-id="{{item.id}}">
        <view class="info-row">
          <text class="label">ğŸ‘¤ ç§Ÿå®¢</text>
          <text class="value">{{item.tenantName}} {{item.tenantPhone}}</text>
        </view>
        <view class="info-row">
          <text class="label">ğŸ“… æ—¶é—´</text>
          <text class="value">{{item.date}} {{item.time}}</text>
        </view>
        <view class="info-row" wx:if="{{item.notes}}">
          <text class="label">ğŸ“ å¤‡æ³¨</text>
          <text class="value">{{item.notes}}</text>
        </view>
      </view>

      <view class="card-footer" wx:if="{{item.status === 'pending'}}">
        <view class="btn btn-cancel" bindtap="goToDetail" data-id="{{item.id}}">æ”¹æœŸ/å–æ¶ˆ</view>
        <view class="btn btn-confirm" catchtap="confirmAppointment" data-id="{{item.id}}">ç¡®è®¤</view>
      </view>
    </view>

    <view wx:if="{{loading}}" class="loading">åŠ è½½ä¸­...</view>
    <view wx:if="{{!loading && appointments.length === 0}}" class="empty">æš‚æ— é¢„çº¦</view>
  </view>
</view>
