<view class="container">
  <view class="mesh-gradient"></view>
  <navbar title="åˆåŒè®¾ç½®" showBack="{{true}}"></navbar>

  <scroll-view scroll-y class="main-body">
    <!-- é¢„è®¾åˆåŒæ¨¡æ¿ -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">é¢„è®¾åˆåŒæ¨¡æ¿</text>
        <text class="section-desc">ç³»ç»Ÿæä¾›çš„æ ‡å‡†åˆåŒæ¨¡æ¿</text>
      </view>
      
      <block wx:for="{{presetTemplates}}" wx:key="id">
        <view class="template-item glass-card">
          <view class="template-left">
            <view class="template-icon">
              <text class="icon-text">ğŸ“„</text>
            </view>
            <view class="template-info">
              <text class="template-name">{{item.name}}</text>
              <text class="template-desc">{{item.description}}</text>
            </view>
          </view>
          <view class="template-btns">
            <view class="btn-item preview" bindtap="previewTemplate" data-id="{{item.id}}">é¢„è§ˆ</view>
            <view class="btn-item use" bindtap="useTemplate" data-id="{{item.id}}">ä½¿ç”¨</view>
          </view>
        </view>
      </block>
    </view>

    <!-- è‡ªå®šä¹‰åˆåŒ -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">æˆ‘çš„åˆåŒæ¨¡æ¿ ({{customTemplates.length}}ä»½)</text>
        <text class="section-desc">æ‚¨ä¸Šä¼ çš„è‡ªå®šä¹‰åˆåŒ</text>
      </view>
      
      <!-- è°ƒè¯•ï¼šæ˜¾ç¤ºæ¯ä¸ªæ¨¡æ¿åç§° -->
      <view style="background:#ffe; padding:20rpx; margin-bottom:20rpx; border-radius:12rpx;">
        <text style="font-size:24rpx; color:#666;">è°ƒè¯•ä¿¡æ¯ï¼šå…± {{customTemplates.length}} ä»½\n</text>
        <block wx:for="{{customTemplates}}" wx:key="index">
          <text style="font-size:22rpx; display:block;">{{index+1}}. {{item.name}}\n</text>
        </block>
      </view>
      
      <!-- æ­£å¼åˆ—è¡¨ -->
      <block wx:for="{{customTemplates}}" wx:key="index">
        <view class="template-item glass-card" style="margin-bottom:16rpx;">
          <view class="template-left">
            <view class="template-icon custom">
              <text class="icon-text">ğŸ“</text>
            </view>
            <view class="template-info">
              <text class="template-name">{{item.name}}</text>
              <text class="template-desc">ä¸Šä¼ äº {{item.uploadDate}}</text>
            </view>
          </view>
          <view class="template-btns">
            <view class="btn-item preview" bindtap="previewTemplate" data-id="{{item.id}}">é¢„è§ˆ</view>
            <view class="btn-item delete" bindtap="deleteTemplate" data-id="{{item.id}}">åˆ é™¤</view>
          </view>
        </view>
      </block>
      
      <view wx:if="{{customTemplates.length === 0}}" class="empty-box glass-card">
        <text class="empty-icon">ğŸ“‚</text>
        <text class="empty-text">æš‚æ— è‡ªå®šä¹‰åˆåŒ</text>
      </view>

      <!-- ä¸Šä¼ æŒ‰é’® -->
      <view class="upload-btn" bindtap="uploadContract">
        <text class="upload-icon">+</text>
        <text>ä¸Šä¼ è‡ªå®šä¹‰åˆåŒ</text>
      </view>
    </view>

    <view style="height: 60rpx;"></view>
  </scroll-view>
</view>
