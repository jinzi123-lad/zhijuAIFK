<view class="container pb-24">
  <view class="mesh-gradient"></view>
  <navbar title="合同模板" showBack="{{true}}"></navbar>

  <view class="main-body">
    <!-- 加载中 -->
    <view wx:if="{{loading}}" class="loading-box">
      <text class="text-muted">加载中...</text>
    </view>

    <!-- 模板列表 -->
    <view wx:else class="template-list">
      <block wx:for="{{templates}}" wx:key="id">
        <view class="template-card glass-card" bindtap="selectTemplate" data-id="{{item.id}}">
          <view class="template-header">
            <view class="template-icon">
              <icon name="file" color="#2563eb" size="40"></icon>
            </view>
            <view class="template-info">
              <text class="template-name">{{item.name}}</text>
              <text class="template-type">{{item.typeLabel}}</text>
            </view>
            <view class="template-badge {{item.is_default ? 'default' : 'custom'}}">
              {{item.is_default ? '系统' : '自定义'}}
            </view>
          </view>
          <view class="template-desc" wx:if="{{item.description}}">
            <text>{{item.description}}</text>
          </view>
          <view class="template-actions">
            <button class="action-btn preview" bindtap="previewTemplate" data-id="{{item.id}}" catchtap="previewTemplate">
              <icon name="eye" color="#64748b" size="28"></icon>
              <text>预览</text>
            </button>
            <button class="action-btn use" bindtap="useTemplate" data-id="{{item.id}}" catchtap="useTemplate">
              <icon name="check" color="#2563eb" size="28"></icon>
              <text>使用</text>
            </button>
            <button wx:if="{{!item.is_default}}" class="action-btn edit" bindtap="editTemplate" data-id="{{item.id}}" catchtap="editTemplate">
              <icon name="edit" color="#f59e0b" size="28"></icon>
              <text>编辑</text>
            </button>
          </view>
        </view>
      </block>

      <!-- 空状态 -->
      <view wx:if="{{templates.length === 0}}" class="empty-state">
        <view class="empty-icon">
          <icon name="file" color="#94a3b8" size="80"></icon>
        </view>
        <text class="empty-title">暂无合同模板</text>
        <text class="empty-desc">点击下方按钮创建自定义模板</text>
      </view>
    </view>

    <!-- 添加模板按钮 -->
    <view class="add-template-btn" bindtap="createTemplate">
      <icon name="plus" color="#fff" size="32"></icon>
      <text>创建自定义模板</text>
    </view>
  </view>
</view>