<view class="page-container">
  <navbar title="æˆ‘çš„é¢„çº¦" />

  <view wx:if="{{loading}}" class="loading">åŠ è½½ä¸­...</view>

  <view class="appointment-list" wx:if="{{!loading}}">
    <view class="appointment-card" wx:for="{{appointments}}" wx:key="id">
      <view class="card-content" bindtap="goToProperty" data-property-id="{{item.propertyId}}">
        <image class="property-image" src="{{item.propertyImage || '/images/placeholder.png'}}" mode="aspectFill" />
        <view class="info">
          <view class="title">{{item.propertyTitle}}</view>
          <view class="meta">
            <text class="date">ğŸ“… {{item.date}} {{item.time}}</text>
          </view>
          <view class="landlord">æˆ¿ä¸œï¼š{{item.landlordName}}</view>
        </view>
        <view class="status-tag status-{{item.status}}">{{item.statusText}}</view>
      </view>

      <!-- æ”¹æœŸæç¤º -->
      <view class="reschedule-notice" wx:if="{{item.status === 'rescheduled'}}">
        <text class="notice-text">æˆ¿ä¸œå»ºè®®æ”¹ä¸ºï¼š{{item.rescheduleDate}} {{item.rescheduleTime}}</text>
        <view class="notice-actions">
          <view class="notice-btn refuse" catchtap="cancelAppointment" data-id="{{item.id}}">æ‹’ç»</view>
          <view class="notice-btn agree" catchtap="agreeReschedule" data-id="{{item.id}}">åŒæ„</view>
        </view>
      </view>

      <!-- å¾…ç¡®è®¤å¯å–æ¶ˆ -->
      <view class="card-actions" wx:if="{{item.status === 'pending'}}">
        <view class="action-btn" catchtap="cancelAppointment" data-id="{{item.id}}">å–æ¶ˆé¢„çº¦</view>
      </view>
    </view>

    <view wx:if="{{appointments.length === 0}}" class="empty">
      <text class="empty-icon">ğŸ“…</text>
      <text class="empty-text">æš‚æ— é¢„çº¦</text>
      <navigator url="/pages/tenant/property/list/index" class="empty-btn">å»æ‰¾æˆ¿</navigator>
    </view>
  </view>
</view>
